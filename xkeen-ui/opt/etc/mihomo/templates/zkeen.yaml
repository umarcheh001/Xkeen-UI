#######################################################################################################
# –û–ø–∏—Å–∞–Ω–∏–µ:
# –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É http://192.168.1.1:9090/ui (192.168.1.1 = IP —Ä–æ—É—Ç–µ—Ä–∞).
# –ü–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Å–µ—Ä–≤–µ—Ä–∞ –∏ –∑–∞–ø—É—Å–∫–∞ mihomo –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∑–∞–π—Ç–∏ –≤ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∏ –≤—ã–±—Ä–∞—Ç—å –Ω—É–∂–Ω–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –¥–ª—è —Å–µ–ª–µ–∫—Ç–æ—Ä–æ–≤.
# –ì—Ä—É–ø–ø–∞ "–ó–∞–±–ª–æ–∫. —Å–µ—Ä–≤–∏—Å—ã" —Å–æ–¥–µ—Ä–∂–∏—Ç —Å–ø–∏—Å–æ–∫ –¥–æ–º–µ–Ω–æ–≤ –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Ä–µ—Å—É—Ä—Å–æ–≤.
#######################################################################################################
# –î–ª—è —Ä–∞–±–æ—Ç—ã Discord —Ç—Ä–µ–±—É–µ—Ç—Å—è –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞—Ç—å –ø–æ—Ä—Ç—ã XKeen: 80,443,2000:2300,8443,19200:19400,50000:50030
# –î–ª—è —Ä–∞–±–æ—Ç—ã Whatsapp/Telegram —Ç—Ä–µ–±—É–µ—Ç—Å—è –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞—Ç—å –ø–æ—Ä—Ç—ã Xkeen: 80,443,596:599,1400,3478,5222
#######################################################################################################

port: 7890
socks-port: 7891
allow-lan: true
mode: rule
log-level: silent
ipv6: true
unified-delay: true
tcp-concurrent: true
global-client-fingerprint: chrome
redir-port: 7892
tproxy-port: 7893

# –ò—Å–ø–æ–ª—å–∑—É–µ–º geosite/geoip-–±–∞–∑—ã ZKeen –¥–ª—è GEOSITE/GEOIP-–ø—Ä–∞–≤–∏–ª
geodata-mode: true
geox-url:
  geosite: "https://github.com/jameszeroX/zkeen-domains/releases/latest/download/zkeen.dat"
  geoip:   "https://github.com/jameszeroX/zkeen-ip/releases/latest/download/zkeenip.dat"

# Dashboard (–í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è)
external-controller: "0.0.0.0:9090"
secret: "admin"
external-ui: ui
external-ui-url: "https://github.com/Zephyruso/zashboard/releases/latest/download/dist.zip"
profile:
  store-selected: true

sniffer:
  enable: true
  parse-pure-ip: true
  force-dns-mapping: true
  sniff:
    HTTP:
    TLS:
    QUIC:

anchors:
  a1: &domain       { type: http, format: mrs,  behavior: domain,    interval: 86400 }
  a2: &ipcidr       { type: http, format: mrs,  behavior: ipcidr,    interval: 86400 }
  a3: &classical    { type: http, format: text, behavior: classical, interval: 86400 }
  a4: &inline       { type: inline,            behavior: classical }
  a5: &ipcidr-text  { type: http, format: text, behavior: ipcidr,    interval: 86400 }

#############################################################################################
# –ü—Ä–∏–º–µ—Ä VLESS –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –ë–ï–ó –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø–æ–¥–ø–∏—Å–∫–∏ #
#############################################################################################



######################################################################################
# –ü–æ–¥–ø–∏—Å–∫–∏ ‚Äì –∞–¥—Ä–µ—Å–∞ –ø–æ–¥—Å—Ç–∞–≤–ª—è—é—Ç—Å—è –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–æ–º –∏–∑ –ø–æ–ª—è "–ü–æ–¥–ø–∏—Å–∫–∏" –≤ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ   #
# 1-—è —Å—Å—ã–ª–∫–∞ ‚Üí proxy-sub, 2-—è ‚Üí proxy-sub-2, 3‚Äì5-—è ‚Üí proxy-sub-3..5                  #
######################################################################################
proxy-providers:
  proxy-sub:
    type: http
    url: ""
    path: ./proxy_providers/proxy-sub.yaml
    interval: 3600
    health-check:
      enable: true
      url: "http://www.gstatic.com/generate_204"
      interval: 300
      timeout: 8000
      lazy: true
      expected-status: 204
    override:
      tfo: true
      mptcp: true
      udp: true

  proxy-sub-2:
    type: http
    url: ""
    path: ./proxy_providers/proxy-sub-2.yaml
    interval: 3600
    health-check:
      enable: true
      url: "http://www.gstatic.com/generate_204"
      interval: 300
      timeout: 8000
      lazy: true
      expected-status: 204
    override:
      tfo: true
      mptcp: true
      udp: true
  proxy-sub-3:
    type: http
    url: ""
    path: ./proxy_providers/proxy-sub-3.yaml
    interval: 3600
    health-check:
      enable: true
      url: "http://www.gstatic.com/generate_204"
      interval: 300
      timeout: 8000
      lazy: true
      expected-status: 204
    override:
      tfo: true
      mptcp: true
      udp: true
  proxy-sub-4:
    type: http
    url: ""
    path: ./proxy_providers/proxy-sub-4.yaml
    interval: 3600
    health-check:
      enable: true
      url: "http://www.gstatic.com/generate_204"
      interval: 300
      timeout: 8000
      lazy: true
      expected-status: 204
    override:
      tfo: true
      mptcp: true
      udp: true
  proxy-sub-5:
    type: http
    url: ""
    path: ./proxy_providers/proxy-sub-5.yaml
    interval: 3600
    health-check:
      enable: true
      url: "http://www.gstatic.com/generate_204"
      interval: 300
      timeout: 8000
      lazy: true
      expected-status: 204
    override:
      tfo: true
      mptcp: true
      udp: true

proxy-groups:
  - name: –ó–∞–±–ª–æ–∫. —Å–µ—Ä–≤–∏—Å—ã
    type: select
    icon: https://cdn.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Reject.png
    use:
      - proxy-sub
      - proxy-sub-2

  - name: YouTube
    type: select
    icon: https://cdn.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/YouTube.png
    include-all: true
    proxies: [–ó–∞–±–ª–æ–∫. —Å–µ—Ä–≤–∏—Å—ã, DIRECT]

  - name: Discord
    type: select
    icon: https://cdn.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Discord.png
    proxies: [–ó–∞–±–ª–æ–∫. —Å–µ—Ä–≤–∏—Å—ã, DIRECT]

  - name: Twitch
    type: select
    icon: https://cdn.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Twitch.png
    proxies: [DIRECT, –ó–∞–±–ª–æ–∫. —Å–µ—Ä–≤–∏—Å—ã]

  - name: Reddit
    type: select
    icon: https://www.redditstatic.com/shreddit/assets/favicon/192x192.png
    proxies: [DIRECT, –ó–∞–±–ª–æ–∫. —Å–µ—Ä–≤–∏—Å—ã]

  - name: Meta
    type: select
    icon: https://github.com/zxc-rv/assets/raw/main/group-icons/meta.png
    proxies: [–ó–∞–±–ª–æ–∫. —Å–µ—Ä–≤–∏—Å—ã, DIRECT]

  - name: Spotify
    type: select
    icon: https://cdn.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Spotify.png
    exclude-filter: üá∑üá∫
    proxies: [–ó–∞–±–ª–æ–∫. —Å–µ—Ä–≤–∏—Å—ã, DIRECT]

  - name: Telegram
    type: select
    icon: https://cdn.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Telegram.png
    proxies: [DIRECT, –ó–∞–±–ª–æ–∫. —Å–µ—Ä–≤–∏—Å—ã]

  - name: Steam
    type: select
    icon: https://cdn.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Steam.png
    proxies: [DIRECT, –ó–∞–±–ª–æ–∫. —Å–µ—Ä–≤–∏—Å—ã]

  - name: Cloudflare
    type: select
    icon: https://cdn.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Cloudflare.png
    proxies: [PASS, –ó–∞–±–ª–æ–∫. —Å–µ—Ä–≤–∏—Å—ã]

  - name: Amazon
    type: select
    icon: https://cdn.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Amazon.png
    proxies: [PASS, –ó–∞–±–ª–æ–∫. —Å–µ—Ä–≤–∏—Å—ã]

  - name: Google
    type: select
    icon: https://cdn.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Google_Search.png
    proxies: [PASS, –ó–∞–±–ª–æ–∫. —Å–µ—Ä–≤–∏—Å—ã]

  - name: GitHub
    type: select
    icon: https://cdn.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/GitHub.png
    proxies: [PASS, –ó–∞–±–ª–æ–∫. —Å–µ—Ä–≤–∏—Å—ã]

  - name: AI
    type: select
    icon: https://cdn.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Bot.png
    exclude-filter: üá∑üá∫
    proxies: [–ó–∞–±–ª–æ–∫. —Å–µ—Ä–≤–∏—Å—ã]

  - name: Twitter
    type: select
    icon: https://cdn.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Twitter.png
    proxies: [–ó–∞–±–ª–æ–∫. —Å–µ—Ä–≤–∏—Å—ã, DIRECT]

  - name: Colocrossing
    type: select
    icon: https://cdn.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Server.png
    proxies: [DIRECT, –ó–∞–±–ª–æ–∫. —Å–µ—Ä–≤–∏—Å—ã]

  - name: Contabo
    type: select
    icon: https://cdn.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Server.png
    proxies: [DIRECT, –ó–∞–±–ª–æ–∫. —Å–µ—Ä–≤–∏—Å—ã]

  - name: DigitalOcean
    type: select
    icon: https://cdn.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Server.png
    proxies: [DIRECT, –ó–∞–±–ª–æ–∫. —Å–µ—Ä–≤–∏—Å—ã]

  - name: Gcore
    type: select
    icon: https://cdn.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Server.png
    proxies: [DIRECT, –ó–∞–±–ª–æ–∫. —Å–µ—Ä–≤–∏—Å—ã]

  - name: Hetzner
    type: select
    icon: https://cdn.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Server.png
    proxies: [DIRECT, –ó–∞–±–ª–æ–∫. —Å–µ—Ä–≤–∏—Å—ã]

  - name: Linode
    type: select
    icon: https://cdn.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Server.png
    proxies: [DIRECT, –ó–∞–±–ª–æ–∫. —Å–µ—Ä–≤–∏—Å—ã]

  - name: Mega
    type: select
    icon: https://cdn.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Server.png
    proxies: [DIRECT, –ó–∞–±–ª–æ–∫. —Å–µ—Ä–≤–∏—Å—ã]

  - name: Oracle
    type: select
    icon: https://cdn.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Server.png
    proxies: [DIRECT, –ó–∞–±–ª–æ–∫. —Å–µ—Ä–≤–∏—Å—ã]

  - name: OVH
    type: select
    icon: https://cdn.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Server.png
    proxies: [DIRECT, –ó–∞–±–ª–æ–∫. —Å–µ—Ä–≤–∏—Å—ã]

  - name: Scaleway
    type: select
    icon: https://cdn.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Server.png
    proxies: [DIRECT, –ó–∞–±–ª–æ–∫. —Å–µ—Ä–≤–∏—Å—ã]

  - name: Vultr
    type: select
    icon: https://cdn.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Server.png
    proxies: [DIRECT, –ó–∞–±–ª–æ–∫. —Å–µ—Ä–≤–∏—Å—ã]

  - name: Akamai
    type: select
    icon: https://cdn.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Server.png
    proxies: [DIRECT, –ó–∞–±–ª–æ–∫. —Å–µ—Ä–≤–∏—Å—ã]

  - name: CDN77
    type: select
    icon: https://cdn.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Server.png
    proxies: [DIRECT, –ó–∞–±–ª–æ–∫. —Å–µ—Ä–≤–∏—Å—ã]

  - name: Fastly
    type: select
    icon: https://cdn.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Server.png
    proxies: [DIRECT, –ó–∞–±–ª–æ–∫. —Å–µ—Ä–≤–∏—Å—ã]

  - name: QUIC
    type: select
    icon: https://github.com/zxc-rv/assets/raw/main/group-icons/quic.png
    proxies: [REJECT, PASS]

rule-providers:
  amazon@domain:       { <<: *domain,      url: https://github.com/MetaCubeX/meta-rules-dat/raw/meta/geo/geosite/amazon.mrs }
  category-ai@domain:  { <<: *domain,      url: https://github.com/MetaCubeX/meta-rules-dat/raw/meta/geo/geosite/category-ai-!cn.mrs }
  cloudflare@domain:   { <<: *domain,      url: https://github.com/MetaCubeX/meta-rules-dat/raw/meta/geo/geosite/cloudflare.mrs }
  discord@classical:   { <<: *classical,   url: https://github.com/zxc-rv/assets/raw/main/rules/discord.list }
  google@domain:       { <<: *domain,      url: https://github.com/MetaCubeX/meta-rules-dat/raw/meta/geo/geosite/google.mrs }
  github@domain:       { <<: *domain,      url: https://github.com/MetaCubeX/meta-rules-dat/raw/meta/geo/geosite/github.mrs }
  meta@domain:         { <<: *domain,      url: https://github.com/MetaCubeX/meta-rules-dat/raw/meta/geo/geosite/facebook.mrs }
  reddit@domain:       { <<: *domain,      url: https://github.com/MetaCubeX/meta-rules-dat/raw/meta/geo/geosite/reddit.mrs }
  refilter@domain:     { <<: *domain,      url: https://github.com/legiz-ru/mihomo-rule-sets/raw/main/re-filter/domain-rule.mrs }
  spotify@domain:      { <<: *domain,      url: https://github.com/MetaCubeX/meta-rules-dat/raw/meta/geo/geosite/spotify.mrs }
  steam@domain:        { <<: *domain,      url: https://github.com/MetaCubeX/meta-rules-dat/raw/meta/geo/geosite/steam.mrs }
  telegram@domain:     { <<: *domain,      url: https://github.com/MetaCubeX/meta-rules-dat/raw/meta/geo/geosite/telegram.mrs }
  twitch@domain:       { <<: *domain,      url: https://github.com/MetaCubeX/meta-rules-dat/raw/meta/geo/geosite/twitch.mrs }
  twitter@domain:      { <<: *domain,      url: https://github.com/MetaCubeX/meta-rules-dat/raw/meta/geo/geosite/twitter.mrs }

rules:
  # –û—Ç–∫–ª—é—á–µ–Ω–∏–µ/—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ QUIC
  - AND,((DST-PORT,443),(NETWORK,UDP)),QUIC

  # –†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –≤—ã—Å–æ–∫–æ–≥–æ –∫–∞—á–µ—Å—Ç–≤–∞ –Ω–∞ Twitch.tv
  - OR,((DOMAIN-SUFFIX,gql.twitch.tv),(DOMAIN-SUFFIX,usher.ttvnw.net)),–ó–∞–±–ª–æ–∫. —Å–µ—Ä–≤–∏—Å—ã

  # –ö–∞—Ç–µ–≥–æ—Ä–∏—è AI 
  - RULE-SET,category-ai@domain,AI

  # Steam / Spotify / Reddit / Twitch / Twitter / Discord
  - RULE-SET,steam@domain,Steam
  - RULE-SET,spotify@domain,Spotify
  - RULE-SET,reddit@domain,Reddit
  - RULE-SET,twitch@domain,Twitch
  - RULE-SET,twitter@domain,Twitter
  - RULE-SET,discord@classical,Discord

  # YouTube: –¥–æ–º–µ–Ω—ã + IP —á–µ—Ä–µ–∑ ZKeen 
  - GEOSITE,YOUTUBE,YouTube
  - GEOIP,YOUTUBE,YouTube

  # Meta: –¥–æ–º–µ–Ω—ã (meta@domain) + IP (GEOIP,META) –≤ –æ–¥–Ω—É –≥—Ä—É–ø–ø—É Meta
  - RULE-SET,meta@domain,Meta
  - GEOIP,META,Meta

  # --- –•–æ—Å—Ç–∏–Ω–≥–∏ –∏ CDN –ø–æ GEOIP –∏–∑ ZKeen ---
  - GEOIP,AKAMAI,Akamai
  - GEOIP,AMAZON,Amazon
  - GEOIP,CDN77,CDN77
  - GEOIP,CLOUDFLARE,Cloudflare
  - GEOIP,COLOCROSSING,Colocrossing
  - GEOIP,CONTABO,Contabo
  - GEOIP,DIGITALOCEAN,DigitalOcean
  - GEOIP,FASTLY,Fastly
  - GEOIP,GCORE,Gcore
  - GEOIP,GOOGLE,Google
  - GEOIP,HETZNER,Hetzner
  - GEOIP,LINODE,Linode
  - GEOIP,MEGA,Mega
  - GEOIP,ORACLE,Oracle
  - GEOIP,OVH,OVH
  - GEOIP,SCALEWAY,Scaleway
  - GEOIP,TELEGRAM,Telegram
  - GEOIP,VULTR,Vultr

  # --- ZKeen GEOSITE –¥–ª—è –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–æ–º–µ–Ω–æ–≤ ---
  - RULE-SET,refilter@domain,–ó–∞–±–ª–æ–∫. —Å–µ—Ä–≤–∏—Å—ã
  - GEOSITE,DOMAINS,–ó–∞–±–ª–æ–∫. —Å–µ—Ä–≤–∏—Å—ã
  - GEOSITE,OTHER,–ó–∞–±–ª–æ–∫. —Å–µ—Ä–≤–∏—Å—ã
  - GEOSITE,POLITIC,–ó–∞–±–ª–æ–∫. —Å–µ—Ä–≤–∏—Å—ã

  # Google / GitHub 
  - RULE-SET,google@domain,Google
  - RULE-SET,github@domain,GitHub

  # –û—Å—Ç–∞–ª—å–Ω–æ–µ ‚Äî –Ω–∞–ø—Ä—è–º—É—é
  - MATCH,DIRECT

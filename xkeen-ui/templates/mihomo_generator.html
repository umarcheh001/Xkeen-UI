<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8">
  <title>Xkeen UI ‚Äî Mihomo –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="csrf-token" content="{{ csrf_token }}">

  
  <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}">
  <link rel="icon" type="image/png" sizes="32x32" href="{{ url_for('static', filename='favicon-32x32.png') }}">
  <link rel="icon" type="image/png" sizes="16x16" href="{{ url_for('static', filename='favicon-16x16.png') }}">
  <link rel="apple-touch-icon" href="{{ url_for('static', filename='apple-touch-icon.png') }}">
  <link rel="manifest" href="{{ url_for('static', filename='site.webmanifest') }}">
  <meta name="theme-color" content="#0f172a">
<!-- CodeMirror for YAML editing -->

  <link rel="stylesheet" href="{{ url_for('static', filename='codemirror/codemirror.min.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='codemirror/theme/material-darker.min.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='codemirror/addon/lint/lint.min.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='codemirror/addon/fold/foldgutter.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='codemirror/addon/dialog/dialog.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='codemirror/addon/display/fullscreen.css') }}">

  <script src="{{ url_for('static', filename='codemirror/codemirror.min.js') }}"></script>
  <script src="{{ url_for('static', filename='codemirror/addon/display/indent-guides.js') }}"></script>
  <script src="{{ url_for('static', filename='codemirror/addon/selection/active-line.min.js') }}"></script>
  <script src="{{ url_for('static', filename='codemirror/addon/edit/matchbrackets.min.js') }}"></script>
  <script src="{{ url_for('static', filename='codemirror/addon/edit/closebrackets.js') }}"></script>
  <script src="{{ url_for('static', filename='codemirror/addon/comment/comment.js') }}"></script>
  <script src="{{ url_for('static', filename='codemirror/addon/edit/trailingspace.js') }}"></script>
  <script src="{{ url_for('static', filename='codemirror/addon/display/fullscreen.js') }}"></script>
  <script src="{{ url_for('static', filename='codemirror/addon/display/rulers.js') }}"></script>
  <script src="{{ url_for('static', filename='codemirror/mode/yaml/yaml.min.js') }}"></script>

  <!-- Lint (optional for YAML; safe to load) -->
  <script src="{{ url_for('static', filename='codemirror/addon/lint/lint.min.js') }}"></script>
  <script src="{{ url_for('static', filename='jsonlint/jsonlint.min.js') }}"></script>
  <script src="{{ url_for('static', filename='codemirror/addon/lint/json-lint.min.js') }}"></script>

  <!-- Folding -->
  <script src="{{ url_for('static', filename='codemirror/addon/fold/foldcode.js') }}"></script>
  <script src="{{ url_for('static', filename='codemirror/addon/fold/brace-fold.js') }}"></script>
  <script src="{{ url_for('static', filename='codemirror/addon/fold/indent-fold.js') }}"></script>
  <script src="{{ url_for('static', filename='codemirror/addon/fold/foldgutter.js') }}"></script>

  <!-- Search + Dialog -->
  <script src="{{ url_for('static', filename='codemirror/addon/search/searchcursor.js') }}"></script>
  <script src="{{ url_for('static', filename='codemirror/addon/search/search.js') }}"></script>
  <script src="{{ url_for('static', filename='codemirror/addon/search/match-highlighter.js') }}"></script>
  <script src="{{ url_for('static', filename='codemirror/addon/dialog/dialog.js') }}"></script>

  <!-- Apply typography prefs ASAP (stored in localStorage) -->
  <script src="{{ url_for('static', filename='js/ui/typography.js', v='20251230c') }}"></script>
  <!-- Apply layout prefs ASAP (stored in localStorage) -->
  <script src="{{ url_for('static', filename='js/ui/layout.js', v='20260101c') }}"></script>
  <script src="{{ url_for('static', filename='js/ui/xk_brand.js', v='20260104a') }}"></script>

  <link rel="stylesheet" href="{{ url_for('static', filename='styles.css', v='20260110a') }}">
  <link rel="stylesheet" id="xk-custom-theme-link" href="{{ url_for('custom_theme_css', v=custom_theme_v) }}">
  <link rel="stylesheet" id="xk-terminal-theme-link" href="{{ url_for('terminal_theme_css', v=terminal_theme_v) }}">
  <link rel="stylesheet" id="xk-codemirror-theme-link" href="{{ url_for('codemirror_theme_css', v=codemirror_theme_v) }}">
  {% if custom_css_enabled and not safe_mode %}
  <link rel="stylesheet" id="xk-custom-css-link" href="{{ url_for('custom_css', v=custom_css_v) }}">
  {% endif %}
<style>
    body {
      background: #020617;
      color: #e5e7eb;
    }
    .generator-layout {
      display: grid;
      grid-template-columns: minmax(0, 1.1fr) minmax(0, 1.3fr);
      gap: 16px;
    }
    @media (max-width: 960px) {
      .generator-layout {
        grid-template-columns: minmax(0, 1fr);
      }
    }
    .card {
      background: #020617;
      border-radius: 12px;
      border: 1px solid #1f2937;
      padding: 16px;
      box-shadow: 0 18px 35px rgba(15,23,42,0.85);
    }
    .card h2 {
      margin: 0 0 8px;
      font-size: 18px;
    }
    .card small {
      color: #9ca3af;
    }
    label {
      display: block;
      font-size: 13px;
      margin-bottom: 4px;
      color: #9ca3af;
    }
    select,
    input[type="text"],
    textarea {
      width: 100%;
      border-radius: 6px;
      border: 1px solid #374151;
      background: #020617;
      color: #e5e7eb;
      padding: 6px 8px;
      font-size: 13px;
      box-sizing: border-box;
    }
    select:focus,
    input[type="text"]:focus,
    textarea:focus {
      outline: none;
      border-color: #3b82f6;
      box-shadow: 0 0 0 1px rgba(59,130,246,0.5);
    }
    .row-inline {
      display: flex;
      gap: 8px;
      margin-bottom: 8px;
    }
    .row-inline > div {
      flex: 1;
    }
    .subscriptions-list,
    .proxies-list {
      display: flex;
      flex-direction: column;
      gap: 6px;
    }
    .subscription-row {
      display: flex;
      gap: 6px;
      align-items: center;
    }
    .subscription-row input {
      flex: 1;
    }
    .btn {
      border-radius: 7px;
      border: 1px solid #4b5563;
      background: #020617;
      color: #e5e7eb;
      padding: 5px 10px;
      font-size: 13px;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 4px;
    }
    .btn-primary {
      border-color: #3b82f6;
      background: radial-gradient(circle at top, rgba(59,130,246,0.24), #020617);
      box-shadow: 0 14px 32px rgba(37,99,235,0.5);
    }
    .btn-ghost {
      border-style: solid;
      color: #e5e7eb;
    }
    .btn-danger {
      border-color: #ef4444;
      color: #fecaca;
      background: radial-gradient(circle at top, rgba(248,113,113,0.16), #020617);
    }
    .btn-xs {
      font-size: 11px;
      padding: 3px 7px;
    }
    .btn + .btn {
      margin-left: 6px;
    }
    .rule-groups-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
      gap: 4px 8px;
    }
    .rule-group-item {
      display: flex;
      gap: 4px;
      font-size: 12px;
      align-items: flex-start;
    }
    .rule-group-item span {
      color: #9ca3af;
    }
    .proxy-card {
      border-radius: 10px;
      border: 1px solid #374151;
      padding: 8px;
      background: radial-gradient(circle at top left, rgba(59,130,246,0.16), #020617);
    }
    .proxy-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 6px;
    }
    .proxy-header-title {
      font-size: 13px;
      font-weight: 500;
    }
    .proxy-header-type {
      font-size: 11px;
      border-radius: 999px;
      padding: 2px 6px;
      border: 1px solid #4b5563;
      color: #9ca3af;
    }
    .proxy-body {
      display: grid;
      grid-template-columns: minmax(0, 1fr) minmax(0, 1fr);
      gap: 6px 8px;
    }
    .proxy-body .full {
      grid-column: 1 / -1;
    }
    @media (max-width: 960px) {
      .proxy-body {
        grid-template-columns: minmax(0, 1fr);
      }
    }
    .status-bar {
      margin-top: 8px;
      display: flex;
      justify-content: space-between;
      gap: 8px;
      flex-wrap: wrap;
      font-size: 12px;
    }
    .status-actions {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      flex-wrap: wrap;
    }
    .status-message {
      color: #9ca3af;
    }
    .status-message.ok { color: #166534; }
    .status-message.err { color: #fecaca; }
    .edit-toggle {
      display: inline-flex;
      align-items: center;
      gap: 4px;
      font-size: 12px;
      color: #9ca3af;
      cursor: pointer;
    }
    .CodeMirror {
      border-radius: 8px;
      border: 1px solid #374151;
      height: auto;
      min-height: 340px;
    }

    /* Fullscreen (CodeMirror addon/display/fullscreen)
       IMPORTANT: do not constrain the wrapper height in fullscreen.
       Normal-height limiting is handled globally via .CodeMirror-scroll.
    */
    .CodeMirror.CodeMirror-fullscreen {
      max-height: none !important;
      height: auto !important;
    }
    .preview-actions {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      justify-content: flex-end;
      margin-bottom: 6px;
    }

    .preview-head-top {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 10px;
      margin-bottom: 8px;
    }
    .preview-head-top h2 {
      margin: 0;
    }
    .preview-toolbar-host {
      display: flex;
      align-items: center;
      justify-content: flex-end;
      flex: 0 0 auto;
      min-width: 0;
    }
    /* Toolbar moved into header: no extra spacing */
    .preview-toolbar-host .xkeen-cm-toolbar {
      margin: 0;
      padding-right: 0;
    }
    .btn-icon {
      padding-left: 9px;
      padding-right: 9px;
      min-width: 34px;
      justify-content: center;
    }
    .hint {
      font-size: 12px;
      color: #9ca3af;
      margin-top: 6px;
    }
    /* Allow Layout‚Äë—Ç–≤–∏–∫–∏ ‚Üí ¬´–†–∞–∑–º–µ—Ä –æ–ø–∏—Å–∞–Ω–∏–π¬ª to affect helper texts on this page,
       even though .hint is defined locally (after global styles.css). */
    .hint.xk-card-desc {
      font-size: calc(12px * var(--xk-font-scale) * var(--xk-card-desc-scale, 1));
    }
    header a {
      color: #93c5fd;
    }
  
    
    .validation-log-panel {
      margin-top: 16px;
      background: #020617;
      border-radius: 8px;
      border: 1px solid #1f2937;
      padding: 8px 10px 10px;
      max-height: 220px;
      display: flex;
      flex-direction: column;
      gap: 6px;
    }
    .validation-log-header {
      font-size: 12px;
      font-weight: 500;
      color: #e5e7eb;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }
    .validation-log {
      margin: 0;
      padding: 6px 8px;
      background: #020617;
      border-radius: 6px;
      border: 1px solid #111827;
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      font-size: 12px;
      overflow: auto;
    }
    /* –°–≤–µ—Ç–ª–∞—è —Ç–µ–º–∞: –ª–æ–≥ –ø—Ä–æ–≤–µ—Ä–∫–∏ Mihomo */
    html[data-theme="light"] .validation-log-panel {
      background: #f9fafb;
      border-color: #e5e7eb;
    }
    html[data-theme="light"] .validation-log-header {
      color: #111827;
    }
    html[data-theme="light"] .validation-log {
      background: #ffffff;
      border-color: #e5e7eb;
      color: #111827;
    }

    .log-line {
      line-height: 1.35;
      white-space: pre-wrap;
    }
    .log-info {
      color: #60a5fa;
    }
    .log-warn {
      color: #facc15;
    }
    .log-error {
      color: #f87171;
    }
    .log-fatal {
      color: #fb7185;
      font-weight: 600;
    }
    .log-debug {
      color: #9ca3af;
    }

    /* –°–≤–µ—Ç–ª–∞—è —Ç–µ–º–∞ –¥–ª—è Mihomo –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–∞ */
    html[data-theme="light"] body {
      background: #f5f5f7;
      color: #111827;
    }

    html[data-theme="light"] .card {
      background: #ffffff;
      border-color: #d1d5db;
      box-shadow: 0 12px 30px rgba(15, 23, 42, 0.08);
    }

    html[data-theme="light"] label,
    html[data-theme="light"] .hint,
    html[data-theme="light"] small {
      color: #4b5563;
    }

    html[data-theme="light"] .btn {
      background: #ffffff;
      color: #111827;
      border-color: #d1d5db;
    }

    html[data-theme="light"] .btn-primary {
      background: #1d4ed8;
      color: #ffffff;
      border-color: #1d4ed8;
      box-shadow: 0 14px 32px rgba(37, 99, 235, 0.35);
    }

    html[data-theme="light"] .btn-danger {
      background: #fee2e2;
      color: #b91c1c;
      border-color: #ef4444;
    }

    html[data-theme="light"] .proxy-card {
      background: #ffffff;
      border-color: #d1d5db;
    }

    html[data-theme="light"] .proxy-header-type {
      background: #f3f4f6;
      border-color: #d1d5db;
      color: #4b5563;
    }

    html[data-theme="light"] .status-message {
      color: #6b7280;
    }

    html[data-theme="light"] .status-message.ok {
      color: #166534;
    }

    html[data-theme="light"] .status-message.err {
      color: #b91c1c;
    }

    /* –ë–æ–ª–µ–µ –∫–æ–Ω—Ç—Ä–∞—Å—Ç–Ω—ã–µ —á–µ–∫–±–æ–∫—Å—ã –≥—Ä—É–ø–ø */
    html[data-theme="light"] .rule-group-item input[type="checkbox"] {
      width: 14px;
      height: 14px;
      accent-color: #2563eb; /* —Å–∏–Ω–∏–π –∞–∫—Ü–µ–Ω—Ç –¥–ª—è —Å–≤–µ—Ç–ª–æ–π —Ç–µ–º—ã */
      cursor: pointer;
    }

    html[data-theme="dark"] .rule-group-item input[type="checkbox"] {
      width: 14px;
      height: 14px;
      accent-color: #60a5fa; /* —Å–∏–Ω–∏–π –∞–∫—Ü–µ–Ω—Ç –¥–ª—è —Ç—ë–º–Ω–æ–π —Ç–µ–º—ã */
      cursor: pointer;
    }

  </style>
</head>
<body>
  <div id="global-xkeen-spinner">
    <div class="global-spinner-box">
      <div class="global-spinner-icon"></div>
      <div class="global-spinner-text" id="global-xkeen-spinner-text">
        –ü—Ä–∏–º–µ–Ω—è–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ–º xkeen‚Ä¶
      </div>
    </div>
  </div>


  <!-- Wider container (match DevTools page width) -->
  <div class="container container-wide">
    <header>
      <h1>Mihomo ‚Äî –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä –∫–æ–Ω—Ñ–∏–≥–∞</h1>
      <p>–ù–æ–≤—ã–π –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä –¥–ª—è –ø—Ä–æ—Ñ–∏–ª–µ–π —Ä–æ—É—Ç–µ—Ä–∞ (bazy ZKeen / –∫–∞—Å—Ç–æ–º–Ω—ã–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã).</p>

      <div class="actions" style="justify-content: space-between; align-items: center;">
        <a href="{{ url_for('index') }}" class="btn-link">‚Üê –ù–∞–∑–∞–¥</a>
        <div class="header-actions">
          <button
            type="button"
            id="theme-toggle-btn"
            class="theme-toggle-btn theme-toggle-header"
            aria-label="–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å —Ç–µ–º—É"
          ></button>
          <a href="{{ url_for('devtools_page') }}" class="btn-link" title="DevTools">DevTools</a>
          <a href="{{ url_for('logout') }}" class="btn-link" title="–í—ã–π—Ç–∏ –∏–∑ –ø–∞–Ω–µ–ª–∏">–í—ã–π—Ç–∏</a>
        </div>
      </div>
    </header>

    <div class="generator-layout">
      <!-- LEFT CARD -->
      <div class="card">
        <h2>–ò—Å—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ</h2>
        <small class="xk-card-desc">–ü—Ä–æ—Ñ–∏–ª—å, —à–∞–±–ª–æ–Ω, –ø–æ–¥–ø–∏—Å–∫–∏, –ø–∞–∫–µ—Ç—ã –≥—Ä—É–ø–ø/–ø—Ä–∞–≤–∏–ª –∏ —É–∑–ª—ã.</small>

        <div style="height:8px"></div>

        <div class="row-inline">
          <div>
            <label for="profileSelect">–ü—Ä–æ—Ñ–∏–ª—å</label>
            <select id="profileSelect">
              <option value="router_custom">–†–æ—É—Ç–µ—Ä (–∫–∞—Å—Ç–æ–º–Ω—ã–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã)</option>
              <option value="router_zkeen">–†–æ—É—Ç–µ—Ä (–±–∞–∑—ã ZKeen)</option>
            </select>
          </div>
        </div>

        <div style="margin-top:4px">
          <label>–ü–æ–¥–ø–∏—Å–∫–∏ (proxy-providers)</label>
          <div id="subscriptionsList" class="subscriptions-list"></div>
          <button type="button" id="addSubscriptionBtn" class="btn btn-ghost btn-xs">
            + –î–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫—É
          </button>
          <div class="hint xk-card-desc">
            –ü–µ—Ä–≤—ã–µ 5 –ø–æ–¥–ø–∏—Å–æ–∫ –∑–∞–ø–æ–ª–Ω—è—Ç –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã:
            my-vless-sub, second-sub, third-sub, fourth-sub, fifth-sub.
          </div>
        </div>

        <div style="margin-top:10px">
          <label for="defaultGroupsInput">–ì—Ä—É–ø–ø—ã –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–ª—è —É–∑–ª–æ–≤</label>
          <input id="defaultGroupsInput" type="text" value="–ó–∞–±–ª–æ–∫. —Å–µ—Ä–≤–∏—Å—ã" placeholder="–ó–∞–±–ª–æ–∫. —Å–µ—Ä–≤–∏—Å—ã,YouTube">
          <div class="hint xk-card-desc">
            –ï—Å–ª–∏ —É —É–∑–ª–∞ –Ω–µ –∑–∞–¥–∞–Ω—ã —Å–≤–æ–∏ –≥—Ä—É–ø–ø—ã, –±—É–¥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω—ã —ç—Ç–∏.
          </div>
        </div>

        <div style="margin-top:12px">
          <div style="display:flex;justify-content:space-between;align-items:center;">
            <label>–ü–∞–∫–µ—Ç—ã –≥—Ä—É–ø–ø –∏ –ø—Ä–∞–≤–∏–ª</label>
            <label style="font-size:11px;color:#9ca3af;">
              <input id="ruleGroupsSelectAll" type="checkbox" style="margin-right:4px">
              –û—Ç–º–µ—Ç–∏—Ç—å –≤—Å—ë
            </label>
          </div>
          <div id="ruleGroupsList" class="rule-groups-grid"></div>
          <div class="hint xk-card-desc">
            –û—Ç–º–µ—á–µ–Ω–Ω—ã–µ –ø–∞–∫–µ—Ç—ã –æ—Å—Ç–∞–Ω—É—Ç—Å—è –≤ —à–∞–±–ª–æ–Ω–µ, –æ—Å—Ç–∞–ª—å–Ω—ã–µ –≥—Ä—É–ø–ø—ã/–ø—Ä–∞–≤–∏–ª–∞ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–µ—Ç.
          </div>
        </div>

        <hr style="margin:14px 0;border-color:#1f2937">

        <div>
          <label>–£–∑–ª—ã (proxies)</label>
          <div id="proxiesList" class="proxies-list"></div>
          <button type="button" id="addProxyBtn" class="btn btn-ghost btn-xs">
            + –î–æ–±–∞–≤–∏—Ç—å —É–∑–µ–ª
          </button>
          <div class="hint xk-card-desc">
            –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è VLESS —Å—Å—ã–ª–∫–∏, WireGuard-–∫–æ–Ω—Ñ–∏–≥–∏ –∏ –≥–æ—Ç–æ–≤—ã–µ YAML-–±–ª–æ–∫–∏ proxy.
          </div>
        </div>
      </div>

      <!-- RIGHT CARD -->
      <div class="card">
        <div style="display:flex;justify-content:space-between;align-items:flex-end;gap:8px;">
          <div style="flex:1;min-width:0;">
            <div class="preview-head-top">
              <h2>–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä</h2>
              <!-- Toolbar (–ü–æ–∏—Å–∫/–§—É–ª—Å–∫—Ä–∏–Ω/–∏ —Ç.–¥.) –±—É–¥–µ—Ç –ø–æ–¥–∫–ª—é—á—ë–Ω –∫ CodeMirror –∏ –≤—Å—Ç–∞–≤–ª–µ–Ω —Å—é–¥–∞ -->
              <div id="previewToolbarHost" class="preview-toolbar-host"></div>
            </div>
            <small class="xk-card-desc">
              –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –∑–∞–≥—Ä—É–∂–µ–Ω –±–∞–∑–æ–≤—ã–π —Å–∫–µ–ª–µ—Ç. –ú–æ–∂–Ω–æ –¥–æ—Ä–∞–±–æ—Ç–∞—Ç—å –≤—Ä—É—á–Ω—É—é –ø—Ä–∏ –≤–∫–ª—é—á—ë–Ω–Ω–æ–º ¬´–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ¬ª.
            </small>
            <div id="stateSummary" class="hint" style="margin-top:4px;">
              –ü—Ä–æ—Ñ–∏–ª—å: router_custom ¬∑ Rule-–≥—Ä—É–ø–ø: 0 ¬∑ –ü–æ–¥–ø–∏—Å–æ–∫: 0 ¬∑ –ü—Ä–æ–∫—Å–∏: 0
            </div>
          </div>
        </div>

        <textarea id="previewTextarea" style="display:none;"></textarea>
        <div class="hint xk-card-desc">
          –†–µ–∂–∏–º <strong>–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ</strong> –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤—Ä—É—á–Ω—É—é –ø—Ä–∞–≤–∏—Ç—å yaml, –∫–æ—Ç–æ—Ä—ã–π –∑–∞—Ç–µ–º —É—Ö–æ–¥–∏—Ç –Ω–∞ —Ä–æ—É—Ç–µ—Ä.
        </div>

                <div class="status-bar">
          <div id="statusMessage" class="status-message">
            –°–∫–µ–ª–µ—Ç –∑–∞–≥—Ä—É–∂–µ–Ω. –í–∫–ª—é—á–∏—Ç–µ ¬´–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ¬ª –¥–ª—è —Ä—É—á–Ω—ã—Ö –ø—Ä–∞–≤–æ–∫.
          </div>
          <div class="status-actions">
            <label class="edit-toggle">
              <input type="checkbox" id="editToggle">
              –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
            </label>
            <button type="button" id="generateBtn" class="btn btn-primary btn-icon" title="–î–µ–º–æ: —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å/–æ–±–Ω–æ–≤–∏—Ç—å –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä" aria-label="–î–µ–º–æ">
              ‚öôÔ∏è
            </button>
            <button type="button" id="copyBtn" class="btn" title="–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞">
              üìã
            </button>
            <button type="button" id="saveBtn" class="btn" title="–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –ø—Ä–æ—Ñ–∏–ª—å">
              üíæ
            </button>
            <button type="button" id="validateBtn" class="btn" title="–ü—Ä–æ–≤–µ—Ä–∏—Ç—å config.yaml">
              ü©∫
            </button>
            <button type="button" id="applyBtn" class="btn" title="–ü—Ä–∏–º–µ–Ω–∏—Ç—å –Ω–∞ —Ä–æ—É—Ç–µ—Ä–µ">
              üöÄ
            </button>
          </div>
        </div>

        <div class="validation-log-panel">
          <div class="validation-log-header">
            –õ–æ–≥ –ø—Ä–æ–≤–µ—Ä–∫–∏ mihomo
            <button type="button" id="clearValidationLogBtn" class="btn" style="float:right;">
              –û—á–∏—Å—Ç–∏—Ç—å
            </button>
          </div>
          <div id="validationLog" class="validation-log"></div>
        </div>

	<!-- Modularization scaffold (no behavior changes yet) -->
	<script src="{{ url_for('static', filename='js/00_state.js') }}"></script>
	<script src="{{ url_for('static', filename='js/01_bootstrap.js') }}"></script>
	<script src="{{ url_for('static', filename='js/ui/toast.js') }}"></script>
	<script src="{{ url_for('static', filename='js/ui/modal.js') }}"></script>
	<script src="{{ url_for('static', filename='js/ui/theme.js') }}"></script>
	<script src="{{ url_for('static', filename='js/ui/codemirror_links.js', v='20260105c') }}"></script>
  <script src="{{ url_for('static', filename='js/util/helpers.js') }}"></script>
  <script src="{{ url_for('static', filename='js/ui/spinner_fetch.js') }}"></script>
  <script src="{{ url_for('static', filename='js/ui/codemirror_toolbar.js') }}"></script>
  <script src="{{ url_for('static', filename='js/features/mihomo_generator.js') }}"></script>
  <script src="{{ url_for('static', filename='js/pages/mihomo_generator.init.js') }}"></script>
<div id="validationModal" class="modal hidden" onclick="if (event.target === this) hideValidationModal();">
  <div class="modal-content">
    <div class="modal-header">
      <span class="modal-title">–†–µ–∑—É–ª—å—Ç–∞—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Mihomo</span>
      <button type="button" class="modal-close" onclick="hideValidationModal()">√ó</button>
    </div>
    <div id="validationModalBody" class="modal-body modal-body-logs"></div>
  </div>
</div>

<div id="toast-container"></div>
</body>
</html>

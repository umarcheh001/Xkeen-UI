<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8">
  <title>Xkeen UI ‚Äî –ù–∞—Å—Ç—Ä–æ–π–∫–∏ XKeen</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="csrf-token" content="{{ csrf_token }}">

    <!-- CodeMirror for XKeen text files -->

  <link rel="stylesheet" href="{{ url_for('static', filename='codemirror/codemirror.min.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='codemirror/theme/material-darker.min.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='codemirror/addon/display/fullscreen.css') }}">

  <script src="{{ url_for('static', filename='codemirror/codemirror.min.js') }}"></script>
  <script src="{{ url_for('static', filename='codemirror/addon/display/indent-guides.js') }}"></script>
  <script src="{{ url_for('static', filename='codemirror/addon/selection/active-line.min.js') }}"></script>
  <script src="{{ url_for('static', filename='codemirror/addon/edit/matchbrackets.min.js') }}"></script>
  <script src="{{ url_for('static', filename='codemirror/addon/comment/comment.js') }}"></script>
  <script src="{{ url_for('static', filename='codemirror/addon/edit/trailingspace.js') }}"></script>
  <script src="{{ url_for('static', filename='codemirror/addon/display/fullscreen.js') }}"></script>
  <script src="{{ url_for('static', filename='codemirror/mode/shell/shell.min.js') }}"></script>


<link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
</head>
<body>
  <div id="global-xkeen-spinner">
    <div class="global-spinner-box">
      <div class="global-spinner-icon"></div>
      <div class="global-spinner-text" id="global-xkeen-spinner-text">
        –ü—Ä–∏–º–µ–Ω—è–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ–º xkeen‚Ä¶
      </div>
    </div>
  </div>


  <div class="container">
    <header>
      <h1>Xkeen ‚Äî –Ω–∞—Å—Ç—Ä–æ–π–∫–∏</h1>
      <p>–ü–æ—Ä—Ç—ã –∏ IP-–∏—Å–∫–ª—é—á–µ–Ω–∏—è –¥–ª—è /opt/etc/xkeen.</p>
      <div class="actions" style="justify-content: space-between; align-items: center;">
        <a href="{{ url_for('index') }}" class="btn-link">‚Üê –í–µ—Ä–Ω—É—Ç—å—Å—è –∫ –æ—Å–Ω–æ–≤–Ω–æ–π –ø–∞–Ω–µ–ª–∏</a>
        <div class="header-actions">
          <button
            type="button"
            id="theme-toggle-btn"
            class="theme-toggle-btn theme-toggle-header"
            aria-label="–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å —Ç–µ–º—É"
          ></button>
          <a href="{{ url_for('devtools_page') }}" class="btn-link" title="DevTools">DevTools</a>
          <a href="{{ url_for('logout') }}" class="btn-link" title="–í—ã–π—Ç–∏ –∏–∑ –ø–∞–Ω–µ–ª–∏">–í—ã–π—Ç–∏</a>
        </div>
      </div>
    </header>

    <div class="layout-single">
      
      <section class="card commands-card">
        <div class="commands-header" onclick="toggleXkeenSettings()">
          <h2>–ü–æ—Ä—Ç—ã –∏ –∏—Å–∫–ª—é—á–µ–Ω–∏—è XKeen</h2>
          <span id="xkeen-arrow">‚ñº</span>
        </div>
        <div id="xkeen-body">
          <p>–§–∞–π–ª—ã –∏–∑ –∫–∞—Ç–∞–ª–æ–≥–∞ <code>/opt/etc/xkeen</code>:</p>

          <h3>port_proxying.lst</h3>
          <p class="small">
            –ü–æ—Ä—Ç—ã –∏ –¥–∏–∞–ø–∞–∑–æ–Ω—ã, –∫–æ—Ç–æ—Ä—ã–µ –Ω—É–∂–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —á–µ—Ä–µ–∑ –ø—Ä–æ–∫—Å–∏.
          </p>
          <textarea id="port-proxying-editor"
                    class="xkeen-textarea"
                    spellcheck="false"
                    rows="10"
                    placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä:
80
443
596:599
–ö–∞–∂–¥–∞—è —Å—Ç—Ä–æ–∫–∞ ‚Äî –ø–æ—Ä—Ç –∏–ª–∏ –¥–∏–∞–ø–∞–∑–æ–Ω –ø–æ—Ä—Ç–æ–≤."></textarea>
          <div class="actions">
            <button id="port-proxying-save-btn">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å port_proxying.lst</button>
          </div>
          <div id="port-proxying-status" class="status"></div>

          <hr>

          <h3>port_exclude.lst</h3>
          <p class="small">
            –ü–æ—Ä—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –Ω—É–∂–Ω–æ –∏—Å–∫–ª—é—á–∏—Ç—å –∏–∑ –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏—è.<br>
            <strong>–í–∞–∂–Ω–æ:</strong> –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–ø–∏—Å–æ–∫ –ø—Ä–æ–∫—Å–∏—Ä—É–µ–º—ã—Ö –ø–æ—Ä—Ç–æ–≤ –∏ –∏—Å–∫–ª—é—á–µ–Ω–∏—è –Ω–µ–ª—å–∑—è,
            –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç —É –ø–æ—Ä—Ç–æ–≤ –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏—è.
          </p>
          <textarea id="port-exclude-editor"
                    class="xkeen-textarea"
                    spellcheck="false"
                    rows="10"
                    placeholder="–ü–æ—Ä—Ç—ã –¥–ª—è –∏—Å–∫–ª—é—á–µ–Ω–∏—è –∏–∑ –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏—è.
–ù–∞–ø—Ä–∏–º–µ—Ä:
22
25
80:89"></textarea>
          <div class="actions">
            <button id="port-exclude-save-btn">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å port_exclude.lst</button>
          </div>
          <div id="port-exclude-status" class="status"></div>

          <hr>

          <h3>ip_exclude.lst</h3>
          <p class="small">
            IP –∏ –ø–æ–¥—Å–µ—Ç–∏, –∫–æ—Ç–æ—Ä—ã–µ –Ω—É–∂–Ω–æ –∏—Å–∫–ª—é—á–∏—Ç—å –∏–∑ –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏—è (–ø–æ –æ–¥–Ω–æ–π –≤ —Å—Ç—Ä–æ–∫–µ).
          </p>
          <textarea id="ip-exclude-editor"
                    class="xkeen-textarea"
                    spellcheck="false"
                    rows="10"
                    placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä:
192.168.0.0/16
2001:db8::/32"></textarea>
          <div class="actions">
            <button id="ip-exclude-save-btn">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å ip_exclude.lst</button>
          </div>
          <div id="ip-exclude-status" class="status"></div>
        </div>
      </section>

    </div>

    <div id="toast-container"></div>

    <footer>
      <small>Xkeen UI ‚Äî —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫ XKeen</small>
    </footer>
  </div>

	<!-- Modularization scaffold (no behavior changes yet) -->
	<script src="{{ url_for('static', filename='js/00_state.js') }}"></script>
	<script src="{{ url_for('static', filename='js/01_bootstrap.js') }}"></script>
	<script src="{{ url_for('static', filename='js/ui/toast.js') }}"></script>
	<script src="{{ url_for('static', filename='js/ui/theme.js') }}"></script>
  <script src="{{ url_for('static', filename='js/util/helpers.js') }}"></script>
  <script src="{{ url_for('static', filename='js/ui/spinner_fetch.js') }}"></script>
  <script src="{{ url_for('static', filename='js/features/local_io.js') }}"></script>
  <script src="{{ url_for('static', filename='js/features/service_status.js') }}"></script>
    <script src="{{ url_for('static', filename='js/features/xkeen_texts.js') }}"></script>
  <script src="{{ url_for('static', filename='js/pages/xkeen.init.js') }}"></script>
  <script src="{{ url_for('static', filename='main.js') }}"></script>
</body>
</html>
